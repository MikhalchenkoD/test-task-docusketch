# Тестовое задание для DocuSketch

Этот проект предоставляет решение для мониторинга использования памяти и генерации оповещений через HTTP-запросы к API. А так же REST API сервис, который включает в себя настройку Docker Compose с двумя контейнерами: базой данных NoSQL и приложением на Python, использующим Flask для обработки запросов.

## Установка и запуск

Убедитесь, что у вас установлены Docker и docker-compose.

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/MikhalchenkoD/test-task-docusketch.git
    cd test-task-docusketch
    ```
    
2. Запуск скрипта для контроля потребления памяти:

    ```bash
    python control_memery
    ```
    

3. Сборка и запуск контейнеров с приложением и базой данных:

    ```bash
    cd api
    docker-compose up --build
    ```

   Приложение будет доступно по адресу [http://localhost:8080](http://localhost:8080).

## Использование

1. **Создание пользователя**: Отправьте POST запрос на эндпоинт `/user` с параметром `name`, указывающим имя пользователя, которого необходимо добавить. Ответ:

    ```
    {
      "inserted_id": "653658015c51873fa48bd3d6",
      "message": "User added successfully"
    }
    ```

2. **Получение пользователей**: Чтобы получить всех пользователей, отправьте GET запрос на `/users`. Ответ:

    ```
    [
      { "name": "Миша" },
      { "name": "Андрей" },
      { "name": "Максим" }
    ]
    ```

3. **Обновление пользователя**: Чтобы обновить данные пользователя, отправьте PUT запрос на `/user` с параметрами `old_name`и `new_name`, указывающими старое и новое имя пользователя, которому необходимо обновить данные. Ответ:

    ```
    {
      "message": "User updated successfully"
    }
    ```

## Структура проекта

- `api/`: Код REST API приложения.
  - `app.py`: Основной файл с Flask приложением и MongoDB.
  - `Dockerfile`: Dockerfile для сборки образа приложения.
  - `docker-compose.yml`: Файл для запуска и настройки Docker контейнеров.
- `control_memery`: cкрипт для контроля потребления памяти.
